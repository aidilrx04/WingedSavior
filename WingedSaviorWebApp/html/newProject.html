<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>New Project - Winged Saviors</title>
    <link href="styles.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <header class="fixed-header">
      <div class="header-content">
        <img
          src="img/logo.png"
          alt="Winged Saviors Logo"
          class="logo-img"
          height="50px"
          width="auto"
        />
      </div>
    </header>
    <main>
      <br /><br /><br />
      <section class="features container">
        <h2>Create a New Project</h2>
        <form id="new-project-form" class="form-container">
          <div class="form-group">
            <label for="project-name">Project Name:</label>
            <input type="text" id="project-name" name="project-name" required />
          </div>
          <div class="form-group">
            <label for="project-coordinates">Project Coordinates (cm):</label>
            <input
              type="text"
              id="project-coordinates"
              name="project-coordinates"
              required
            />
          </div>
          <div class="form-group">
            <label for="drone-detection">Drone Detection:</label>
            <input
              type="text"
              id="drone-detection"
              name="drone-detection"
              required
            />
          </div>
          <button type="submit">Create Project</button>
        </form>
      </section>
    </main>
    <footer class="bottom-nav">
      <ul>
        <li>
          <a href="home.html" class="active">
            <img src="img/home.png" alt="Home" /><br />
            <span class="nav-name">Home</span>
          </a>
        </li>
        <li>
          <a href="notification.html">
            <img src="img/notification.png" alt="Notifications" />
            <span class="nav-name">Notifications</span>
          </a>
        </li>
        <li>
          <a href="profile.html">
            <img src="img/user.png" alt="Profile" /><br />
            <span class="nav-name">Profile</span>
          </a>
        </li>
      </ul>
    </footer>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
      integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script>
      const BACKEND_URL = "http://127.0.0.1:5000";

      function api(path) {
        return BACKEND_URL + path;
      }

      $(function () {
        const $form = $("#new-project-form");
        const $name = $("#project-name");
        const $coordinate = $("#project-coordinates");
        const $detection = $("#drone-detection");

        $form.on("submit", async function (e) {
          e.preventDefault();

          const name = $name.prop("value");
          const coordinate = $coordinate.prop("value");
          const detection = $detection.prop("value");

          // send to backend
          const res = await fetch(api("/create_project"), {
            method: "post",
            headers: {
              "Content-Type": "application/json",
              accept: "application/json",
            },
            body: JSON.stringify({ name, coordinate, detection }),
          });

          console.log(await res.text());
        });
      });
    </script>
  </body>
</html>
